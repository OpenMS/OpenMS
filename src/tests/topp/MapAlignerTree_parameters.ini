<?xml version="1.0" encoding="ISO-8859-1"?>
<PARAMETERS version="1.7.0" xsi:noNamespaceSchemaLocation="https://raw.githubusercontent.com/OpenMS/OpenMS/develop/share/OpenMS/SCHEMAS/Param_1_7_0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <NODE name="MapAlignerTree" description="Tree guided correction of retention time distortions between maps.">
    <ITEM name="version" value="2.4.0-topp-MapAlignerTree-2019-10-26" type="string" description="Version of the tool that generated this parameters file." required="false" advanced="true" />
    <NODE name="1" description="Instance &apos;1&apos; section for &apos;MapAlignerTree&apos;">
      <ITEMLIST name="in" type="input-file" description="Input files" required="true" advanced="false" supported_formats="*.featureXML">
      </ITEMLIST>
      <ITEM name="out" value="" type="output-file" description="Output file" required="true" advanced="false" supported_formats="*.consensusXML" />
      <ITEMLIST name="trafo_out" type="output-file" description="Transformation output files. This option or &apos;out&apos; has to be provided; they can be used together." required="false" advanced="false" supported_formats="*.trafoXML">
      </ITEMLIST>
      <ITEM name="transformation_type" value="trafo" type="string" description="Option to decide transformation path during alignment." required="false" advanced="false" restrictions="trafo,features,peptides" />
      <ITEM name="fl_rt_transform" value="true" type="string" description="With true the FeatureLinkerUnlabeldKD transforms retention times of input files." required="false" advanced="false" restrictions="true,false" />
      <ITEM name="log" value="" type="string" description="Name of log file (created only when specified)" required="false" advanced="true" />
      <ITEM name="debug" value="0" type="int" description="Sets the debug level" required="false" advanced="true" />
      <ITEM name="threads" value="1" type="int" description="Sets the number of threads allowed to be used by the TOPP tool" required="false" advanced="false" />
      <ITEM name="no_progress" value="false" type="bool" description="Disables progress logging to command line" required="false" advanced="true" />
      <ITEM name="force" value="false" type="bool" description="Overwrite tool specific checks." required="false" advanced="true" />
      <ITEM name="test" value="false" type="bool" description="Enables the test mode (needed for internal use only)" required="false" advanced="true" />
      <NODE name="align_algorithm" description="Algorithm parameters section">
        <ITEM name="score_cutoff" value="false" type="bool" description="If only IDs above a score cutoff should be used. Used together with min_score." required="false" advanced="false" />
        <ITEM name="min_score" value="0.05" type="double" description="Minimum score for an ID to be considered. Applies to the last score calculated.#br#Unless you have very few runs or identifications, increase this value to focus on more informative peptides." required="false" advanced="false" />
        <ITEM name="min_run_occur" value="2" type="int" description="Minimum number of runs (incl. reference, if any) in which a peptide must occur to be used for the alignment.#br#Unless you have very few runs or identifications, increase this value to focus on more informative peptides." required="false" advanced="false" restrictions="2:" />
        <ITEM name="max_rt_shift" value="0.5" type="double" description="Maximum realistic RT difference for a peptide (median per run vs. reference). Peptides with higher shifts (outliers) are not used to compute the alignment.#br#If 0, no limit (disable filter); if &gt; 1, the final value in seconds; if &lt;= 1, taken as a fraction of the range of the reference RT scale." required="false" advanced="false" restrictions="0.0:" />
        <ITEM name="use_unassigned_peptides" value="true" type="string" description="Should unassigned peptide identifications be used when computing an alignment of feature or consensus maps? If &apos;false&apos;, only peptide IDs assigned to features will be used." required="false" advanced="false" restrictions="true,false" />
        <ITEM name="use_feature_rt" value="true" type="bool" description="When aligning feature or consensus maps, don&apos;t use the retention time of a peptide identification directly; instead, use the retention time of the centroid of the feature (apex of the elution profile) that the peptide was matched to. If different identifications are matched to one feature, only the peptide closest to the centroid in RT is used.#br#Precludes &apos;use_unassigned_peptides&apos;." required="false" advanced="false" />
      </NODE>
      <NODE name="model" description="Options to control the modeling of retention time transformations from data">
        <ITEM name="type" value="b_spline" type="string" description="Type of model" required="false" advanced="false" restrictions="linear,b_spline,lowess,interpolated" />
        <NODE name="b_spline" description="Parameters for &apos;b_spline&apos; model">
          <ITEM name="wavelength" value="0.0" type="double" description="Determines the amount of smoothing by setting the number of nodes for the B-spline. The number is chosen so that the spline approximates a low-pass filter with this cutoff wavelength. The wavelength is given in the same units as the data; a higher value means more smoothing. &apos;0&apos; sets the number of nodes to twice the number of input points." required="false" advanced="false" restrictions="0.0:" />
          <ITEM name="num_nodes" value="5" type="int" description="Number of nodes for B-spline fitting. Overrides &apos;wavelength&apos; if set (to two or greater). A lower value means more smoothing." required="false" advanced="false" restrictions="0:" />
          <ITEM name="extrapolate" value="linear" type="string" description="Method to use for extrapolation beyond the original data range. &apos;linear&apos;: Linear extrapolation using the slope of the B-spline at the corresponding endpoint. &apos;b_spline&apos;: Use the B-spline (as for interpolation). &apos;constant&apos;: Use the constant value of the B-spline at the corresponding endpoint. &apos;global_linear&apos;: Use a linear fit through the data (which will most probably introduce discontinuities at the ends of the data range)." required="false" advanced="false" restrictions="linear,b_spline,constant,global_linear" />
          <ITEM name="boundary_condition" value="2" type="int" description="Boundary condition at B-spline endpoints: 0 (value zero), 1 (first derivative zero) or 2 (second derivative zero)" required="false" advanced="false" restrictions="0:2" />
        </NODE>
      </NODE>
      <NODE name="linker_algorithm" description="Algorithm parameters section">
          <ITEM name="mz_unit" value="ppm" type="string" description="Unit of m/z tolerance" required="false" advanced="false" restrictions="ppm,Da" />
          <ITEM name="nr_partitions" value="100" type="int" description="Number of partitions in m/z space" required="false" advanced="false" restrictions="1:" />
          <NODE name="warp" description="">
            <ITEM name="enabled" value="false" type="string" description="Whether or not to internally warp feature RTs using LOWESS transformation before linking (reported RTs in results will always be the original RTs)" required="false" advanced="false" restrictions="true,false" />
            <ITEM name="rt_tol" value="100" type="double" description="Width of RT tolerance window (sec)" required="false" advanced="false" restrictions="0:" />
            <ITEM name="mz_tol" value="0.3" type="double" description="m/z tolerance (in ppm or Da)" required="false" advanced="false" restrictions="0:" />
            <ITEM name="max_pairwise_log_fc" value="0.5" type="double" description="Maximum absolute log10 fold change between two compatible signals during compatibility graph construction. Two signals from different maps will not be connected by an edge in the compatibility graph if absolute log fold change exceeds this limit (they might still end up in the same connected component, however). Note: this does not limit fold changes in the linking stage, only during RT alignment, where we try to find high-quality alignment anchor points. Setting this to a value &lt; 0 disables the FC check." required="false" advanced="true" />
            <ITEM name="min_rel_cc_size" value="0.5" type="double" description="Only connected components containing compatible features from at least max(2, (warp_min_occur * number_of_input_maps)) input maps are considered for computing the warping function" required="false" advanced="true" restrictions="0:1" />
            <ITEM name="max_nr_conflicts" value="0" type="int" description="Allow up to this many conflicts (features from the same map) per connected component to be used for alignment (-1 means allow any number of conflicts)" required="false" advanced="true" restrictions="-1:" />
          </NODE>
          <NODE name="link" description="">
            <ITEM name="rt_tol" value="100" type="double" description="Width of RT tolerance window (sec)" required="false" advanced="false" restrictions="0:" />
            <ITEM name="mz_tol" value="0.3" type="double" description="m/z tolerance (in ppm or Da)" required="false" advanced="false" restrictions="0:" />
          </NODE>
          <NODE name="distance_RT" description="Distance component based on RT differences">
            <ITEM name="exponent" value="1" type="double" description="Normalized RT differences ([0-1], relative to &apos;max_difference&apos;) are raised to this power (using 1 or 2 will be fast, everything else is REALLY slow)" required="false" advanced="true" restrictions="0:" />
            <ITEM name="weight" value="1" type="double" description="Final RT distances are weighted by this factor" required="false" advanced="true" restrictions="0:" />
          </NODE>
          <NODE name="distance_MZ" description="Distance component based on m/z differences">
            <ITEM name="exponent" value="2" type="double" description="Normalized ([0-1], relative to &apos;max_difference&apos;) m/z differences are raised to this power (using 1 or 2 will be fast, everything else is REALLY slow)" required="false" advanced="true" restrictions="0:" />
            <ITEM name="weight" value="1" type="double" description="Final m/z distances are weighted by this factor" required="false" advanced="true" restrictions="0:" />
          </NODE>
          <NODE name="distance_intensity" description="Distance component based on differences in relative intensity (usually relative to highest peak in the whole data set)">
            <ITEM name="exponent" value="1" type="double" description="Differences in relative intensity ([0-1]) are raised to this power (using 1 or 2 will be fast, everything else is REALLY slow)" required="false" advanced="true" restrictions="0:" />
            <ITEM name="weight" value="1" type="double" description="Final intensity distances are weighted by this factor" required="false" advanced="true" restrictions="0:" />
            <ITEM name="log_transform" value="enabled" type="string" description="Log-transform intensities? If disabled, d = |int_f2 - int_f1| / int_max. If enabled, d = |log(int_f2 + 1) - log(int_f1 + 1)| / log(int_max + 1))" required="false" advanced="true" restrictions="enabled,disabled" />
          </NODE>
          <NODE name="LOWESS" description="LOWESS parameters for internal RT transformations (only relevant if &apos;warp:enabled&apos; is set to &apos;true&apos;)">
            <ITEM name="span" value="0.666666666666667" type="double" description="Fraction of datapoints (f) to use for each local regression (determines the amount of smoothing). Choosing this parameter in the range .2 to .8 usually results in a good fit." required="false" advanced="true" restrictions="0:1" />
            <ITEM name="num_iterations" value="3" type="int" description="Number of robustifying iterations for lowess fitting." required="false" advanced="true" restrictions="0:" />
            <ITEM name="delta" value="-1" type="double" description="Nonnegative parameter which may be used to save computations (recommended value is 0.01 of the range of the input, e.g. for data ranging from 1000 seconds to 2000 seconds, it could be set to 10). Setting a negative value will automatically do this." required="false" advanced="true" />
            <ITEM name="interpolation_type" value="cspline" type="string" description="Method to use for interpolation between datapoints computed by lowess. &apos;linear&apos;: Linear interpolation. &apos;cspline&apos;: Use the cubic spline for interpolation. &apos;akima&apos;: Use an akima spline for interpolation" required="false" advanced="true" restrictions="linear,cspline,akima" />
            <ITEM name="extrapolation_type" value="four-point-linear" type="string" description="Method to use for extrapolation outside the data range. &apos;two-point-linear&apos;: Uses a line through the first and last point to extrapolate. &apos;four-point-linear&apos;: Uses a line through the first and second point to extrapolate in front and and a line through the last and second-to-last point in the end. &apos;global-linear&apos;: Uses a linear regression to fit a line through all data points and use it for interpolation." required="false" advanced="true" restrictions="two-point-linear,four-point-linear,global-linear" />
          </NODE>
       </NODE>
    </NODE>
  </NODE>
</PARAMETERS>
