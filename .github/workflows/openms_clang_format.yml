# Action to allow clang format linting at the files changed in the PR 

name: openms_clang_format

on:  
  push:
  pull_request:
    branches:
      - develop

jobs:

# Checkout OpenMS
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
      with:
        path: OpenMS

# Get files changed in the PR 
    - id: files
      uses: jitterbit/get-changed-files@v1

# Step into the OpenMS directory
     - name: Step into OpenMS
       shell: bash
       run: |
          cd ${{ github.workspace }}/OpenMS

# Perform linting 
    - name: Use clang format linting
      uses: DoozyX/clang-format-lint-action@v0.12
      with:
        source: ${{ steps.files.outputs.all }}
        extensions: 'h,cpp'
        clangFormatVersion: 12
        style: LLVM
